<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        /* Styling the spinner */
        #spinnerBSB, #spinnerBNB{
        display: block;
        top: 30vh;
        left: calc(50% - 20px);
        width: 40px;
        height: 40px;
        }
        #spinnerBSB div, #spinnerBNB div, #spinnerAlfa div, #spinnerParitet div, #spinnerBGPB div, #spinnerMTB div, #spinnerPayOkay div {
        box-sizing: border-box;
        display: block;
        position: absolute;
        width: 32px;
        height: 32px;
        margin: 4px;
        border: 4px solid rgb(30, 191, 255);
        border-radius: 50%;
        animation: spinnerAnimation 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
        border-color: rgb(30, 191, 255) transparent transparent transparent;
        }
        #spinnerBSB div:nth-child(1), #spinnerBNB div:nth-child(1), #spinnerAlfa div:nth-child(1), #spinnerParitet div:nth-child(1), #spinnerBGPB div:nth-child(1), #spinnerMTB div:nth-child(1), #spinnerPayOkay div:nth-child(1) {
        animation-delay: -0.45s;
        }
        #spinnerBSB div:nth-child(2), #spinnerBNB div:nth-child(2), #spinnerAlfa div:nth-child(2), #spinnerParitet div:nth-child(2), #spinnerBGPB div:nth-child(2), #spinnerMTB div:nth-child(2), #spinnerPayOkay div:nth-child(2) {
        animation-delay: -0.3s;
        }
        #spinnerBSB div:nth-child(3), #spinnerBNB div:nth-child(3), #spinnerAlfa div:nth-child(3), #spinnerParitet div:nth-child(3), #spinnerBGPB div:nth-child(3), #spinnerMTB div:nth-child(3), #spinnerPayOkay div:nth-child(3) {
        animation-delay: -0.15s;
        }
        @keyframes spinnerAnimation {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
        }

        table {
            border-spacing: 0;
            width: 100%;
            border: 1px solid #ddd;
        }
        
        th {
            cursor: pointer;
        }
        
        th, td {
            text-align: left;
            padding: 16px;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2
        }
    </style>
</head>

<body>
    <table class="table table-bordered table-secondary" id="sortTable">
        <thead class="bg-primary">
            <tr>
                <th scope="col">BANK</th>
                <th scope="col" onclick="sortTable(0)">USD/BYN</th>
                <th scope="col" onclick="sortTable(1)">EUR/BYN</th>
                <th scope="col" onclick="sortTable(2)">BYN/PLN</th>
                <th scope="col">UPDATE</th>
                <th scope="col">ON DATE</th>
            </tr>
        </thead>
        <tbody class="table-light">
            <tr>
                <th><a href="https://www.bsb.by/obmen-valyut">BSB</a></th>
                <td>
                    <p id="print-BSB-USD"></p>
                </td>
                <td>
                    <p id="print-BSB-EUR"></p>
                </td>
                <td>
                    <p id="print-BSB-PLN"></p>
                </td>
                <td>
                    <div id="spinnerBSB" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button" id="btBSB" disabled="true" class="btn btn-primary" onclick="requestPostBSB()">update</button></td>
                <td>
                    <p id="print-BSB-TS"></p>
                </td>
            </tr>
            <tr>
                <th><a href="https://bnb.by/kursy-valyut/imbank/">BNB</a></th>
                <td>
                    <p id="print-BNB-USD"></p>
                </td>
                <td>
                    <p id="print-BNB-EUR"></p>
                </td>
                <td>
                    <p id="print-BNB-PLN"></p>
                </td>
                <td>
                    <div id="spinnerBNB" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button"  id="btBNB" disabled="true" class="btn btn-primary" onclick="requestPostBNB()">update</button>
                </td>
                <td>
                    <p id="print-BNB-TS"></p>
                </td>
            </tr>
            <!-- <tr>
                <th scope="row">Alfa</th>
                <td>
                    <p id="print-Alfa-USD"></p>
                </td>
                <td>
                    <p id="print-Alfa-EUR"></p>
                </td>
                <td>
                    <p id="print-Alfa-PLN"></p>
                </td>
                <td>
                    <div id="spinnerAlfa" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button" id="btAlfa"  disabled="true"  class="btn btn-primary" onclick="requestPostAlfa()">update</button></td>
                <td>
                    <p id="print-Alfa-TS"></p>
                </td>
            </tr> -->
            <tr>
                <th><a href="https://www.paritetbank.by/private/rates/">Paritet</a></th>
                <td>
                    <p id="print-Paritet-USD"></p>
                </td>
                <td>
                    <p id="print-Paritet-EUR"></p>
                </td>
                <td>
                    <p id="print-Paritet-PLN"></p>
                </td>
                <td>
                    <div id="spinnerParitet" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button"  id="btParitet"  disabled="true"  class="btn btn-primary" onclick="requestPostParitet()">update</button></td>
                <td>
                    <p id="print-Paritet-TS"></p>
                </td>
            </tr>
            <tr>
                <th><a href="https://belgazprombank.by/about/kursi_valjut/">BGPB</a></th>
                <td>
                    <p id="print-BGPB-USD"></p>
                </td>
                <td>
                    <p id="print-BGPB-EUR"></p>
                </td>
                <td>
                    <p id="print-BGPB-PLN"></p>
                </td>
                <td>
                    <div id="spinnerBGPB" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button"  id="btBGPB"  disabled="true"  class="btn btn-primary" onclick="requestPostBGPB()">update</button></td>
                <td>
                    <p id="print-BGPB-TS"></p>
                </td>
            </tr>
            <tr>
                <th><a href="https://www.mtbank.by/courses/cards/">MTB</a></th>
                <td>
                    <p id="print-MTB-USD"></p>
                </td>
                <td>
                    <p id="print-MTB-EUR"></p>
                </td>
                <td>
                    <p id="print-MTB-PLN"></p>
                </td>
                <td>
                    <div id="spinnerMTB" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button"  id="btMTB"  disabled="true"  class="btn btn-primary" onclick="requestPostMTB()">update</button></td>
                <td>
                    <p id="print-MTB-TS"></p>
                </td>
            </tr>
            <tr>
                <th><a href="https://www.mtbank.by/courses/cards/">PayOkay</a></th>
                <td>
                    <p id="print-PayOkay-USD"></p>
                </td>
                <td>
                    <p id="print-PayOkay-EUR"></p>
                </td>
                <td>
                    <p id="print-PayOkay-PLN"></p>
                </td>
                <td>
                    <div id="spinnerPayOkay" style="display: none;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>                    
                    </div>
                    <button type="button"  id="btPayOkay"  disabled="true"  class="btn btn-primary" onclick="requestPostPayOkay()">update</button></td>
                <td>
                    <p id="print-PayOkay-TS"></p>
                </td>
            </tr>
        </tbody>
    </table>

    <script>
        function requestPostBSB() {
            var button = document.getElementById("btBSB");
            var spinner = document.querySelector("#spinnerBSB");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block"; 
  
            let urlBsb = 'https://mobile.bsb.by/api/v1/free-zone-management/exchange-rates/rates';
            console.log('URL for POST:', urlBsb);
            let nowDate = Date.parse(new Date());

            fetch(urlBsb, {
                body: JSON.stringify({
                    'period': nowDate,
                    'type': 'CARD'
                }),
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36'
                },
                method: 'POST',
                redirect: 'follow'
            })
            .then(response => {
                response.json()
                .then(res => {
                let rates = res['rates'];

                let rateUSD = rates[0].sellAmount.toFixed(4);
                let rateEUR = rates[1].sellAmount.toFixed(4);
                let ratePLN = (1 / rates[6].sellAmount).toFixed(4);

                document.getElementById("print-BSB-USD").innerText = rateUSD;
                document.getElementById("print-BSB-EUR").innerText = rateEUR;
                document.getElementById("print-BSB-PLN").innerText = ratePLN;
                document.getElementById("print-BSB-TS").innerText = new Date().toLocaleString();

                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }

        function requestPostBNB() {
            var button = document.getElementById("btBNB");
            var spinner = document.querySelector("#spinnerBNB");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block";           

            let urlBNB = 'https://corsproxy.io/?https://bnb.by/kursy-valyut/imbank/';
            console.log('URL for POST:', urlBNB);

            fetch(urlBNB, {
                headers: {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36',
                }
            })
            .then(response => {
                response.start
                response.event
                response.text()
                .then(res => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(res, "text/html");
                    let rates = JSON.parse(doc.querySelector('input.jsConfig').value);

                    let rateUSD = rates['USD']['BYN']['SALE'].toFixed(4);
                    let rateEUR = rates['EUR']['BYN']['SALE'].toFixed(4);
                    let ratePLN = (1 / rates['PLN']['BYN']['SALE']).toFixed(4);

                    document.getElementById("print-BNB-USD").innerText = rateUSD;
                    document.getElementById("print-BNB-EUR").innerText = rateEUR;
                    document.getElementById("print-BNB-PLN").innerText = ratePLN;
                    document.getElementById("print-BNB-TS").innerText = new Date().toLocaleString();
                    
                    button.disabled = false;
                    button.style.display = 'block';                    
                    spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }

        function requestPostAlfa() {
            var button = document.getElementById("btALfa");
            var spinner = document.querySelector("#spinnerAlfa");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block"; 

            let urlAlfa = 'https://api.codetabs.com/v1/proxy?quest=https://www.alfabank.by/exchange/digital/';
            console.log('URL for POST:', urlAlfa);

            fetch(urlAlfa, {
                cors: 'no-cors',
                headers: {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36',
                }
            })
                .then(response => {
                    response.text()
                    .then(res => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(res, "text/html");
                    let obj = doc.querySelector('div.section-content div[data-component]');
                    let rates = JSON.parse(obj.getAttribute('data-initial'));

                    let rateUSD = Number.parseFloat(rates['initialItems']['0']['currenciesData']['0']['value']['exchangeRate']['0']['sell']['value']).toFixed(4);
                    let rateEUR = Number.parseFloat(rates['initialItems']['0']['currenciesData']['0']['value']['exchangeRate']['1']['sell']['value']).toFixed(4);

                    document.getElementById("print-Alfa-USD").innerText = rateUSD;
                    document.getElementById("print-Alfa-EUR").innerText = rateEUR;
                    document.getElementById("print-Alfa-TS").innerText = new Date().toLocaleString();
                    
                    button.disabled = false;
                    button.style.display = 'block';                    
                    spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }

        function requestPostParitet() {
            var button = document.getElementById("btParitet");
            var spinner = document.querySelector("#spinnerParitet");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block"; 

            let urlParitet = 'https://corsproxy.io/?https://www.paritetbank.by/private/rates/';
            console.log('URL for POST:', urlParitet);
            let nowDate = Date.parse(new Date());

            fetch(urlParitet, {
                cors: 'no-cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36'
                },
                method: 'GET',
            })
                .then(response => {
                    //console.log(response);
                    response.text()
                    .then(res => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(res, "text/html");
                    let conversion  = Array.from(doc.scripts).find(s => s.innerText.includes("var conversion")).innerText;

                    let rates = JSON.parse(conversion.substring(conversion.indexOf("{"), conversion.lastIndexOf("}")+1));
                    let rateUSD = rates['4']['USDBYN']['BUY'].toFixed(4);
                    let rateEUR = rates['4']['EURBYN']['BUY'].toFixed(4);

                    document.getElementById("print-Paritet-USD").innerText = rateUSD;
                    document.getElementById("print-Paritet-EUR").innerText = rateEUR;
                    document.getElementById("print-Paritet-TS").innerText = new Date().toLocaleString();
                    
                    button.disabled = false;
                    button.style.display = 'block';                    
                    spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }

        function requestPostBGPB() {
            var button = document.getElementById("btBGPB");
            var spinner = document.querySelector("#spinnerBGPB");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block"; 

            let urlBGPB = 'https://corsproxy.io/?https://belgazprombank.by/about/kursi_valjut/';
            console.log('URL for POST:', urlBGPB);
            let nowDate = Date.parse(new Date());

            fetch(urlBGPB, {
                cors: 'no-cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36'
                },
                method: 'GET',
            })
                .then(response => {
                    //console.log(response);
                    response.text()
                    .then(res => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(res, "text/html");

                    let conversionUSD  = Array.from(doc.scripts).find(s => s.innerText.includes("currencyChartUSD")).innerText;
                    let conversionEUR  = Array.from(doc.scripts).find(s => s.innerText.includes("currencyChartEUR")).innerText;
                    let conversionPLN  = Array.from(doc.scripts).find(s => s.innerText.includes("currencyChartPLN")).innerText;

                    let objUSD = conversionUSD.substring(conversionUSD.indexOf("[["), conversionUSD.lastIndexOf("]]")+2);
                    let objEUR = conversionEUR.substring(conversionEUR.indexOf("[["), conversionEUR.lastIndexOf("]]")+2);
                    let objPLN = conversionPLN.substring(conversionPLN.indexOf("[["), conversionPLN.lastIndexOf("]]")+2);

                    let jsUSD = JSON.parse(objUSD);
                    let jsEUR = JSON.parse(objEUR);
                    let jsPLN = JSON.parse(objPLN);

                    let rateUSD = (jsUSD[1][jsUSD['1']['length']-1]).toFixed(4);
                    let rateEUR = (jsEUR[1][jsEUR['1']['length']-1]).toFixed(4);
                    let ratePLN = (10/jsPLN[1][jsPLN['1']['length']-1]).toFixed(4);

                    document.getElementById("print-BGPB-USD").innerText = rateUSD;
                    document.getElementById("print-BGPB-EUR").innerText = rateEUR;
                    document.getElementById("print-BGPB-PLN").innerText = ratePLN;
                    document.getElementById("print-BGPB-TS").innerText = new Date().toLocaleString();

                    button.disabled = false;
                    button.style.display = 'block';                    
                    spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }

        function requestPostMTB() {
            var button = document.getElementById("btMTB");
            var spinner = document.querySelector("#spinnerMTB");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block"; 

            let urlMTB = 'https://corsproxy.io/?https://www.mtbank.by/currxml.php';
            console.log('URL for POST:', urlMTB);
            let nowDate = Date.parse(new Date());

            fetch(urlMTB, {
                cors: 'no-cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36'
                },
                method: 'GET',
            })
                .then(response => {
                    response.text()
                    .then(res => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(res, "application/xml");
                                
                    let rateUSD;
                    let rateEUR;
                    
                    let currencies = doc.querySelectorAll('cards currency');

                    currencies.forEach(currency => {
                    if (currency.querySelector('code').textContent==="USD" && currency.querySelector('codeTo').textContent==="BYN") {
                        rateUSD = Number.parseFloat(currency.querySelector('sale').textContent).toFixed(4);}
                    if (currency.querySelector('code').textContent==="EUR" && currency.querySelector('codeTo').textContent==="BYN") {
                        rateEUR = Number.parseFloat(currency.querySelector('sale').textContent).toFixed(4);}
                    });

                    document.getElementById("print-MTB-USD").innerText = rateUSD;
                    document.getElementById("print-MTB-EUR").innerText = rateEUR;
                    document.getElementById("print-MTB-TS").innerText = new Date().toLocaleString();

                    button.disabled = false;
                    button.style.display = 'block';                    
                    spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }

        function requestPostPayOkay() {
            var button = document.getElementById("btPayOkay");
            var spinner = document.querySelector("#spinnerPayOkay");

            button.disabled = true;
            button.style.display = "none";    
            spinner.style.display = "block"; 

            let urlPayOkay = 'https://corsproxy.io/?https://www.mtbank.by/currxml.php';
            console.log('URL for POST:', urlPayOkay);
            let nowDate = Date.parse(new Date());

            fetch(urlPayOkay, {
                cors: 'no-cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36'
                },
                method: 'GET',
            })
                .then(response => {
                    response.text()
                    .then(res => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(res, "application/xml");
                                
                    let rateUSD;
                    let rateEUR;
                    
                    let currencies = doc.querySelectorAll('payokay currency');

                    currencies.forEach(currency => {
                    if (currency.querySelector('code').textContent==="USD" && currency.querySelector('codeTo').textContent==="BYN") {
                        rateUSD = Number.parseFloat(currency.querySelector('sale').textContent).toFixed(4);}
                    if (currency.querySelector('code').textContent==="EUR" && currency.querySelector('codeTo').textContent==="BYN") {
                        rateEUR = Number.parseFloat(currency.querySelector('sale').textContent).toFixed(4);}
                    });

                    document.getElementById("print-PayOkay-USD").innerText = rateUSD;
                    document.getElementById("print-PayOkay-EUR").innerText = rateEUR;
                    document.getElementById("print-PayOkay-TS").innerText = new Date().toLocaleString();

                    button.disabled = false;
                    button.style.display = 'block';                    
                    spinner.style.display = 'none';
                })
            })
            .catch(error => {
                button.disabled = false;
                button.style.display = 'block';                    
                spinner.style.display = 'none';
                console.error(error);
            });
        }
      
        function getExchangeRates() {
            requestPostBSB();
            requestPostBNB();
            //requestPostAlfa();
            requestPostParitet();
            requestPostBGPB();
            requestPostMTB();
            requestPostPayOkay();
        }

        var Timer = function(callback, delay) {
        var timerId, start, remaining = delay;

        this.pause = function() {
            window.clearTimeout(timerId);
            timerId = null;
            remaining -= Date.now() - start;
        };

        this.resume = function() {
            if (timerId) {
                return;
            }

            start = Date.now();
            timerId = window.setTimeout(callback, remaining);
        };

        this.resume();
        };

        window.onload = (event) => {
            console.log('onload');
            //animationButton();
            getExchangeRates();
        };

        function animationButton(idBtn){
            //var a = document.querySelectorAll('button');
            //a.forEach(el =>{console.log(el.onclick.value.toString())})
                //console.log($('button').get.name);

                console.log(idBtn.value['0']);//.querySelector('item'));//.querySelector("item"));

                //let button = document.getElementById(idBtn);            
                //let button = document.querySelector('#button');
                //button.textContent = "..."
                //console.log(button.textContent);
                
            //while(button.disabled === 'true'){
            //    console.log(button.get.name);
            //}

            //var button = document.getElementById(idBtn);
            //button.textContent = "Loading.  ";

            //if($('button').hasClass('disabled')){
            //var button = document.getElementById(idBtn);
            //var button = document.
            //console.log(button.textContent);

            //if($('button').{//hasClass('disabled')){

            //}

            //button.disabled = true;
            //button.textContent = "Loading...";
            //}
                //console.log("1111");
                //console.log($('button').hasClass('disabled'));

                //console.log("start Timer:", Date.parse(new Date()));
                //button.textContent = "Loading.  ";
                //var timer1 = new Timer(function() {
                //    button.textContent = "Loading.. ";
                    //console.log("runing Timer", Date.parse(new Date()));
                    //button.textContent = "Loading   ";
                //}, 3000);
                //button.textContent = "Loading...";
                //console.log("Stop Timer", Date.parse(new Date()));

            // while($('button').hasClass('disabled')){//button.disabled = true){
            //     var timer1 = new Timer(function() {
            //         button.textContent = "Loading   ";
            //     }, 250);
            //     console.log("2222");

            //     var timer2 = new Timer(function() {
            //         button.textContent = "Loading...";
            //     }, 250);

                // timer.pause();
                // button.textContent = "Loading.  ";
                // timer.resume();
                

                // timer.pause();
                // button.textContent = "Loading.. ";
                // timer.resume();

                // timer.pause();
                // button.textContent = "Loading...";
                // timer.resume();

                // timer.pause();
                // button.textContent = "Loading.. ";
                // timer.resume();

                // timer.pause();
                // button.textContent = "Loading.  ";
                // timer.resume();
            //}
        }

     </script>

<script>
    function sortTable(n) {
    var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById("sortTable");
    switching = true;
    // Set the sorting direction to ascending:
    dir = "asc";
    /* Make a loop that will continue until
    no switching has been done: */
    while (switching) {
        // Start by saying: no switching is done:
        switching = false;
        rows = table.rows;
        /* Loop through all table rows (except the
        first, which contains table headers): */
        for (i = 1; i < (rows.length - 1); i++) {
            // Start by saying there should be no switching:
            shouldSwitch = false;
            /* Get the two elements you want to compare,
            one from current row and one from the next: */
            x = rows[i].getElementsByTagName("TD")[n];
            y = rows[i + 1].getElementsByTagName("TD")[n];
            /* Check if the two rows should switch place,
            based on the direction, asc or desc: */
            if (dir == "asc") {
                if (Number.parseFloat(x.innerText) > Number.parseFloat(y.innerText)) {
                // If so, mark as a switch and break the loop:
                shouldSwitch = true;
                break;
                }
            } else if (dir == "desc") {
                if (Number.parseFloat(x.innerText) < Number.parseFloat(y.innerText)) {
                // If so, mark as a switch and break the loop:
                shouldSwitch = true;
                break;
                }
            }
        }
        if (shouldSwitch) {
            /* If a switch has been marked, make the switch
            and mark that a switch has been done: */
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            // Each time a switch is done, increase this count by 1:
            switchcount ++;
        } else {
            /* If no switching has been done AND the direction is "asc",
            set the direction to "desc" and run the while loop again. */
            if (switchcount == 0 && dir == "asc") {
                dir = "desc";
                switching = true;
            }
        }
    }
    }
</script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>

</html>